@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme */
    --background: #FAFAFA;
    --surface: #FFFFFF;
    --surface-raised: #FFFFFF;
    --surface-subtle: #F5F5F5;
    --surface-active: #EAEAEA;
    --surface-hover: rgba(0, 0, 0, 0.02);
    --border: #E5E5E5;
    --border-subtle: #F0F0F0;
    --border-hover: #D4D4D4;
    
    --text-primary: #171717;
    --text-secondary: #525252;
    --text-tertiary: #A3A3A3;
    --text-inverse: #FFFFFF;

    --card-task: #3B82F6;
    --card-task-bg: #EFF6FF;
    --card-task-border: #BFDBFE;
    --card-story: #22C55E;
    --card-story-bg: #F0FDF4;
    --card-story-border: #BBF7D0;
    --card-epic: #A855F7;
    --card-epic-bg: #FAF5FF;
    --card-epic-border: #E9D5FF;
    --card-utility: #6B7280;
    --card-utility-bg: #F9FAFB;
    --card-utility-border: #E5E7EB;

    --success: #22C55E;
    --warning: #F59E0B;
    --error: #EF4444;
    --info: #3B82F6;

    --grain: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
  }

  .dark {
    /* Noir dark variant */
    --background: #0A0A0F;
    --surface: #12121A;
    --surface-raised: #22222E;
    --surface-subtle: #171722;
    --surface-active: #1A1A26;
    --surface-hover: rgba(255, 255, 255, 0.04);
    --border: rgba(255, 255, 255, 0.10);
    --border-subtle: rgba(255, 255, 255, 0.06);
    --border-hover: rgba(255, 255, 255, 0.16);
    
    --text-primary: #F0ECE4;
    --text-secondary: #A8A3B2;
    --text-tertiary: #7A7488;
    --text-inverse: #0A0A0F;

    --card-task: #4488FF;
    --card-task-bg: rgba(68, 136, 255, 0.10);
    --card-task-border: rgba(68, 136, 255, 0.28);
    --card-story: #00D4AA;
    --card-story-bg: rgba(0, 212, 170, 0.10);
    --card-story-border: rgba(0, 212, 170, 0.28);
    --card-epic: #9966FF;
    --card-epic-bg: rgba(153, 102, 255, 0.10);
    --card-epic-border: rgba(153, 102, 255, 0.28);
    --card-utility: #8A8694;
    --card-utility-bg: rgba(138, 134, 148, 0.12);
    --card-utility-border: rgba(138, 134, 148, 0.30);

    --success: #00D4AA;
    --warning: #FFAA00;
    --error: #FF3366;
    --info: #4488FF;
  }

  .slate {
    /* Slate dark variant: brighter surfaces, softer contrast */
    --background: #151922;
    --surface: #1C2230;
    --surface-raised: #272F42;
    --surface-subtle: #222A3A;
    --surface-active: #2A3348;
    --surface-hover: rgba(255, 255, 255, 0.05);
    --border: rgba(255, 255, 255, 0.12);
    --border-subtle: rgba(255, 255, 255, 0.08);
    --border-hover: rgba(255, 255, 255, 0.18);

    --text-primary: #E9E7E2;
    --text-secondary: #B8B4C0;
    --text-tertiary: #938EA0;
    --text-inverse: #151922;

    --card-task: #5A97F8;
    --card-task-bg: rgba(90, 151, 248, 0.12);
    --card-task-border: rgba(90, 151, 248, 0.26);
    --card-story: #2ECBB2;
    --card-story-bg: rgba(46, 203, 178, 0.12);
    --card-story-border: rgba(46, 203, 178, 0.26);
    --card-epic: #A985F8;
    --card-epic-bg: rgba(169, 133, 248, 0.12);
    --card-epic-border: rgba(169, 133, 248, 0.26);
    --card-utility: #9A96A6;
    --card-utility-bg: rgba(154, 150, 166, 0.14);
    --card-utility-border: rgba(154, 150, 166, 0.28);

    --success: #2ECBB2;
    --warning: #F3B24B;
    --error: #F25C84;
    --info: #5A97F8;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-text-primary;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  .dark body::before,
  .slate body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: var(--grain);
    pointer-events: none;
    z-index: 1000;
  }
}

@layer components {
  /* Card base styles */
  .card-base {
    @apply bg-surface border border-border-subtle rounded-card p-card;
    @apply cursor-pointer transition-colors duration-micro;
    @apply hover:bg-surface-hover;
  }

  .card-task {
    @apply card-base border-l-[3px] border-l-card-task;
  }

  .card-story {
    @apply card-base border-l-[3px] border-l-card-story;
  }

  .card-epic {
    @apply card-base border-l-[3px] border-l-card-epic;
  }

  .card-utility {
    @apply card-base border-l-[3px] border-l-card-utility;
  }

  /* Progress bar */
  .progress-bar {
    @apply h-1 bg-border rounded-sm overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full rounded-sm transition-all duration-complex;
  }

  /* Badge base */
  .badge {
    @apply inline-flex items-center gap-1 px-1.5 py-0.5;
    @apply bg-surface-raised rounded text-caption;
  }

  /* Focus styles */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-text-primary focus-visible:ring-offset-2;
  }
}

@layer utilities {
  /* Truncate text */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
